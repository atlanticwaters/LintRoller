<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Design Token Linter</title>
    <style>/* Lint Roller - Main Styles (Light Mode Only) */

:root {
  /* Light mode colors */
  --figma-color-bg: #f5f5f5;
  --figma-color-bg-secondary: #ffffff;
  --figma-color-text: #333333;
  --figma-color-text-secondary: #666666;
  --figma-color-text-tertiary: #999999;
  --figma-color-border: #e5e5e5;
  --figma-color-icon: #333333;

  /* Severity colors */
  --color-error: #dc3545;
  --color-error-bg: #fdf2f2;
  --color-warning: #f59e0b;
  --color-warning-bg: #fffbeb;
  --color-info: #3b82f6;
  --color-info-bg: #eff6ff;
  --color-success: #10b981;
  --color-success-bg: #ecfdf5;

  /* Spacing */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 12px;
  --space-lg: 16px;
  --space-xl: 24px;

  /* Font sizes */
  --font-size-xs: 10px;
  --font-size-sm: 11px;
  --font-size-md: 12px;
  --font-size-lg: 14px;

  /* Border radius */
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--figma-color-text);
  background-color: var(--figma-color-bg);
}

#app {
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
}

.app {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0; /* Critical for flex children to shrink and enable scrolling */
  overflow: hidden;
}

/* Header */
.header {
  padding: var(--space-md) var(--space-lg);
  border-bottom: 1px solid var(--figma-color-border);
  background-color: var(--figma-color-bg-secondary);
}

.header h1 {
  font-size: var(--font-size-lg);
  font-weight: 600;
  margin-bottom: var(--space-sm);
}

.header-controls {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-md);
  font-size: var(--font-size-sm);
  font-weight: 500;
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background-color 0.15s ease;
}

.btn-primary {
  background-color: #18a0fb;
  color: white;
}

.btn-primary:hover {
  background-color: #0d8de8;
}

.btn-primary:disabled {
  background-color: #b3b3b3;
  cursor: not-allowed;
}

.btn-secondary {
  background-color: var(--figma-color-bg);
  color: var(--figma-color-text);
  border: 1px solid var(--figma-color-border);
}

.btn-secondary:hover {
  background-color: var(--figma-color-border);
}

.btn-icon {
  padding: var(--space-xs);
  background: none;
  border: none;
  cursor: pointer;
  color: var(--figma-color-icon);
  border-radius: var(--radius-sm);
}

.btn-icon:hover {
  background-color: var(--figma-color-bg);
}

/* Fix buttons */
.btn-fix {
  background-color: var(--color-success);
  color: white;
  font-size: var(--font-size-xs);
  padding: var(--space-xs) var(--space-sm);
}

.btn-fix:hover {
  background-color: #0d9668;
}

.btn-fix:disabled {
  background-color: var(--figma-color-border);
  cursor: not-allowed;
}

.btn-fix-all {
  background-color: var(--color-success);
  color: white;
  font-size: var(--font-size-xs);
  padding: var(--space-xs) var(--space-sm);
}

.btn-fix-all:hover {
  background-color: #0d9668;
}

.btn-fix-all:disabled {
  background-color: var(--figma-color-border);
  cursor: not-allowed;
}

.btn-fix-group {
  background-color: transparent;
  color: var(--color-success);
  font-size: var(--font-size-xs);
  padding: 2px 6px;
  border: 1px solid var(--color-success);
}

.btn-fix-group:hover {
  background-color: var(--color-success-bg);
}

.btn-fix-group:disabled {
  color: var(--figma-color-border);
  border-color: var(--figma-color-border);
  cursor: not-allowed;
}

/* Unbind button */
.btn-unbind {
  background-color: var(--color-warning);
  color: white;
  font-size: var(--font-size-xs);
  padding: var(--space-xs) var(--space-sm);
}

.btn-unbind:hover {
  background-color: #d97706;
}

.btn-unbind:disabled {
  background-color: var(--figma-color-border);
  cursor: not-allowed;
}

/* Detach button */
.btn-detach,
.btn-detach-group {
  background-color: #8b5cf6;
  color: white;
  font-size: var(--font-size-xs);
  padding: var(--space-xs) var(--space-sm);
}

.btn-detach:hover,
.btn-detach-group:hover {
  background-color: #7c3aed;
}

.btn-detach:disabled,
.btn-detach-group:disabled {
  background-color: var(--figma-color-border);
  cursor: not-allowed;
}

/* Apply Style button (for text styles) */
.btn-apply-style {
  background-color: #0ea5e9;
  color: white;
  font-size: var(--font-size-xs);
  padding: var(--space-xs) var(--space-sm);
}

.btn-apply-style:hover {
  background-color: #0284c7;
}

.btn-apply-style:disabled {
  background-color: var(--figma-color-border);
  cursor: not-allowed;
}

/* Select dropdown */
.select {
  padding: var(--space-xs) var(--space-sm);
  font-size: var(--font-size-sm);
  border: 1px solid var(--figma-color-border);
  border-radius: var(--radius-sm);
  background-color: var(--figma-color-bg-secondary);
  color: var(--figma-color-text);
  cursor: pointer;
}

/* Summary cards */
.summary {
  padding: var(--space-md) var(--space-lg);
  border-bottom: 1px solid var(--figma-color-border);
  background-color: var(--figma-color-bg-secondary);
}

.stat-cards {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--space-sm);
  margin-bottom: var(--space-md);
}

.stat-card {
  padding: var(--space-sm);
  border-radius: var(--radius-md);
  text-align: center;
  background-color: var(--figma-color-bg);
}

.stat-card.error {
  background-color: var(--color-error-bg);
}

.stat-card.warning {
  background-color: var(--color-warning-bg);
}

.stat-card.success {
  background-color: var(--color-success-bg);
}

.stat-card .value {
  font-size: 20px;
  font-weight: 600;
  line-height: 1.2;
}

.stat-card .label {
  font-size: var(--font-size-xs);
  color: var(--figma-color-text-secondary);
}

/* Progress bar */
.progress-container {
  padding: var(--space-md) var(--space-lg);
  background-color: var(--figma-color-bg-secondary);
  border-bottom: 1px solid var(--figma-color-border);
}

.progress-bar {
  height: 4px;
  background-color: var(--figma-color-border);
  border-radius: 2px;
  overflow: hidden;
}

.progress-bar .fill {
  height: 100%;
  background-color: #18a0fb;
  transition: width 0.2s ease;
}

.progress-text {
  font-size: var(--font-size-xs);
  color: var(--figma-color-text-secondary);
  margin-top: var(--space-xs);
}

/* Results list */
.results-container {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-sm);
}

.results-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--figma-color-text-secondary);
  text-align: center;
  padding: var(--space-xl);
}

.results-empty-icon {
  font-size: 48px;
  margin-bottom: var(--space-md);
  opacity: 0.5;
}

.results-group {
  margin-bottom: var(--space-md);
}

.results-group-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-sm) var(--space-md);
  background-color: var(--figma-color-bg);
  border-radius: var(--radius-sm);
  border: 1px solid var(--figma-color-border);
  cursor: pointer;
  font-weight: 500;
  font-size: var(--font-size-sm);
}

.results-group-header:hover {
  background-color: var(--figma-color-bg-secondary);
  border-color: var(--figma-color-text-tertiary);
}

.results-group-title {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.results-group-caret {
  display: inline-block;
  font-size: 10px;
  transition: transform 0.15s ease;
  color: var(--figma-color-text-tertiary);
}

.results-group-caret.expanded {
  transform: rotate(90deg);
}

.results-group-count {
  background-color: var(--figma-color-text-tertiary);
  color: white;
  padding: 2px 6px;
  border-radius: 10px;
  font-size: var(--font-size-xs);
}

.results-group-items {
  margin-top: var(--space-xs);
}

/* Result item */
.result-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background-color 0.15s ease;
}

.result-item:hover {
  background-color: var(--figma-color-bg);
}

.result-item .severity-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-top: 4px;
  flex-shrink: 0;
}

.result-item.error .severity-indicator {
  background-color: var(--color-error);
}

.result-item.warning .severity-indicator {
  background-color: var(--color-warning);
}

.result-item.info .severity-indicator {
  background-color: var(--color-info);
}

.result-item .content {
  flex: 1;
  min-width: 0;
}

.result-item .node-info {
  display: flex;
  gap: var(--space-xs);
  align-items: center;
  margin-bottom: 2px;
}

.result-item .node-name {
  font-weight: 500;
  font-size: var(--font-size-sm);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.result-item .node-type {
  font-size: var(--font-size-xs);
  color: var(--figma-color-text-tertiary);
  background-color: var(--figma-color-bg);
  padding: 1px 4px;
  border-radius: 2px;
}

.result-item .message {
  font-size: var(--font-size-sm);
  color: var(--figma-color-text-secondary);
  line-height: 1.4;
}

.result-item .suggestion {
  font-size: var(--font-size-xs);
  color: var(--color-success);
  margin-top: 2px;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-xs);
}

.result-item .suggestion code {
  background-color: var(--color-success-bg);
  padding: 1px 4px;
  border-radius: 2px;
}

.result-item .suggestion.confidence-close {
  color: var(--color-warning);
}

.result-item .suggestion.confidence-close code {
  background-color: var(--color-warning-bg);
}

.result-item .suggestion.confidence-approximate {
  color: var(--figma-color-text-secondary);
}

.result-item .suggestion.confidence-approximate code {
  background-color: var(--figma-color-bg);
}

.confidence-badge {
  font-size: 9px;
  font-weight: 500;
  padding: 1px 4px;
  border-radius: 2px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.confidence-badge.confidence-exact {
  background-color: var(--color-success);
  color: white;
}

.confidence-badge.confidence-close {
  background-color: var(--color-warning);
  color: white;
}

.confidence-badge.confidence-approximate {
  background-color: var(--figma-color-text-tertiary);
  color: white;
}

.alternatives-toggle {
  font-size: var(--font-size-xs);
  color: var(--color-info);
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  text-decoration: underline;
}

.alternatives-toggle:hover {
  color: var(--figma-color-text);
}

.alternatives-list {
  margin-top: var(--space-xs);
  padding-left: var(--space-md);
  border-left: 2px solid var(--figma-color-border);
}

.alternative-item {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: var(--space-xs) 0;
  font-size: var(--font-size-xs);
}

.alternative-item code {
  background-color: var(--figma-color-bg);
  padding: 1px 4px;
  border-radius: 2px;
  color: var(--figma-color-text);
}

.alternative-distance {
  color: var(--figma-color-text-tertiary);
}

.result-item-actions {
  display: flex;
  gap: var(--space-xs);
  align-items: center;
  flex-shrink: 0;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.result-item:hover .result-item-actions {
  opacity: 1;
}

.result-item .select-btn {
  flex-shrink: 0;
}

/* Fixed state */
.result-item.fixed {
  opacity: 0.6;
}

.result-item.fixed .severity-indicator {
  background-color: var(--color-success);
}

.fixed-badge {
  display: inline-block;
  font-size: 9px;
  font-weight: 500;
  padding: 1px 4px;
  border-radius: 2px;
  background-color: var(--color-success);
  color: white;
  margin-right: var(--space-xs);
  text-transform: uppercase;
}

/* Fix Status Bar */
.fix-status-bar {
  padding: var(--space-sm) var(--space-lg);
  background-color: var(--figma-color-bg-secondary);
  border-bottom: 1px solid var(--figma-color-border);
}

.fix-status-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-sm);
}

.fix-status-title {
  font-size: var(--font-size-sm);
  font-weight: 500;
  color: var(--figma-color-text);
}

.fix-progress-bar {
  display: flex;
  height: 8px;
  border-radius: 4px;
  overflow: hidden;
  background-color: var(--figma-color-border);
  margin-bottom: var(--space-sm);
}

.fix-progress-segment {
  height: 100%;
  transition: width 0.3s ease;
}

.fix-progress-segment.fixed {
  background-color: var(--color-success);
}

.fix-progress-segment.fixable {
  background-color: var(--color-info);
}

.fix-progress-segment.unfixable {
  background-color: var(--figma-color-text-tertiary);
}

.fix-status-legend {
  display: flex;
  gap: var(--space-md);
  flex-wrap: wrap;
}

.fix-legend-item {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: var(--font-size-xs);
  color: var(--figma-color-text-secondary);
}

.fix-legend-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.fix-legend-dot.fixed {
  background-color: var(--color-success);
}

.fix-legend-dot.fixable {
  background-color: var(--color-info);
}

.fix-legend-dot.unfixable {
  background-color: var(--figma-color-text-tertiary);
}

/* Config panel */
.config-panel {
  padding: var(--space-md) var(--space-lg);
  border-top: 1px solid var(--figma-color-border);
  background-color: var(--figma-color-bg-secondary);
}

.config-section {
  margin-bottom: var(--space-md);
}

.config-section:last-child {
  margin-bottom: 0;
}

.config-section h3 {
  font-size: var(--font-size-sm);
  font-weight: 500;
  margin-bottom: var(--space-sm);
  color: var(--figma-color-text-secondary);
}

.config-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-xs) 0;
}

.config-row label {
  font-size: var(--font-size-sm);
}

/* Toggle switch */
.toggle {
  position: relative;
  width: 32px;
  height: 18px;
}

.toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle .slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--figma-color-border);
  border-radius: 9px;
  transition: background-color 0.2s ease;
}

.toggle .slider:before {
  position: absolute;
  content: '';
  height: 14px;
  width: 14px;
  left: 2px;
  bottom: 2px;
  background-color: white;
  border-radius: 50%;
  transition: transform 0.2s ease;
}

.toggle input:checked + .slider {
  background-color: #18a0fb;
}

.toggle input:checked + .slider:before {
  transform: translateX(14px);
}

/* Results toolbar */
.results-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-right: var(--space-md);
  border-bottom: 1px solid var(--figma-color-border);
  background-color: var(--figma-color-bg-secondary);
}

.results-group-actions {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

/* Tabs */
.tabs {
  display: flex;
}

.tab {
  padding: var(--space-sm) var(--space-md);
  font-size: var(--font-size-sm);
  color: var(--figma-color-text-secondary);
  border: none;
  background: none;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  margin-bottom: -1px;
}

.tab:hover {
  color: var(--figma-color-text);
}

.tab.active {
  color: #18a0fb;
  border-bottom-color: #18a0fb;
}

/* Export menu */
.export-menu {
  position: relative;
}

.export-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: var(--space-xs);
  background-color: var(--figma-color-bg-secondary);
  border: 1px solid var(--figma-color-border);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 10;
  min-width: 120px;
}

.export-dropdown button {
  display: block;
  width: 100%;
  padding: var(--space-sm) var(--space-md);
  text-align: left;
  font-size: var(--font-size-sm);
  border: none;
  background: none;
  cursor: pointer;
}

.export-dropdown button:hover {
  background-color: var(--figma-color-bg);
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: var(--figma-color-border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--figma-color-text-tertiary);
}

/* =============================================
   Path Mismatch Badge
   ============================================= */
.path-mismatch-badge {
  display: inline-block;
  font-size: 9px;
  font-weight: 500;
  padding: 1px 4px;
  border-radius: 2px;
  background-color: #8b5cf6;
  color: white;
  margin-right: var(--space-xs);
  text-transform: uppercase;
}

/* Path mismatch progress segment */
.fix-progress-segment.path-mismatch {
  background-color: #8b5cf6;
}

.fix-legend-dot.path-mismatch {
  background-color: #8b5cf6;
}

/* =============================================
   Auto-fix Button
   ============================================= */
.btn-auto-fix {
  background-color: #8b5cf6;
  color: white;
  font-size: var(--font-size-xs);
  padding: var(--space-xs) var(--space-sm);
}

.btn-auto-fix:hover {
  background-color: #7c3aed;
}

.btn-auto-fix:disabled {
  background-color: var(--figma-color-border);
  cursor: not-allowed;
}

/* =============================================
   Fix Status Bar Actions
   ============================================= */
.fix-status-actions {
  display: flex;
  gap: var(--space-xs);
  align-items: center;
}

.btn-fix-all-compact {
  background-color: var(--color-success);
  color: white;
  font-size: var(--font-size-xs);
  padding: var(--space-xs) var(--space-sm);
}

.btn-fix-all-compact:hover {
  background-color: #0d9668;
}

.btn-fix-all-compact:disabled {
  background-color: var(--figma-color-border);
  cursor: not-allowed;
}

/* Activity toggle button */
.btn-activity-toggle {
  background-color: var(--figma-color-bg);
  color: var(--figma-color-text-secondary);
  font-size: var(--font-size-xs);
  padding: var(--space-xs) var(--space-sm);
  border: 1px solid var(--figma-color-border);
}

.btn-activity-toggle:hover {
  background-color: var(--figma-color-border);
}

.btn-activity-toggle.active {
  background-color: var(--color-info-bg);
  border-color: var(--color-info);
  color: var(--color-info);
}

/* =============================================
   Fix Progress Indicator
   ============================================= */
.fix-progress-indicator {
  margin-bottom: var(--space-sm);
  padding: var(--space-sm);
  background-color: var(--color-info-bg);
  border-radius: var(--radius-sm);
}

.fix-progress-text {
  font-size: var(--font-size-xs);
  color: var(--color-info);
  margin-bottom: var(--space-xs);
}

.fix-progress-bar-active {
  height: 4px;
  background-color: var(--figma-color-border);
  border-radius: 2px;
  overflow: hidden;
}

.fix-progress-bar-fill {
  height: 100%;
  background-color: var(--color-info);
  transition: width 0.2s ease;
}

/* =============================================
   Activity Log
   ============================================= */
.activity-log {
  background-color: var(--figma-color-bg-secondary);
  border-bottom: 1px solid var(--figma-color-border);
  max-height: 300px;
  display: flex;
  flex-direction: column;
}

.activity-log-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-sm) var(--space-lg);
  border-bottom: 1px solid var(--figma-color-border);
  flex-shrink: 0;
}

.activity-log-title {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.activity-log-title-text {
  font-size: var(--font-size-sm);
  font-weight: 500;
}

.activity-log-counts {
  display: flex;
  gap: var(--space-xs);
}

.activity-count {
  font-size: var(--font-size-xs);
  padding: 1px 6px;
  border-radius: 10px;
}

.activity-count.success {
  background-color: var(--color-success-bg);
  color: var(--color-success);
}

.activity-count.failed {
  background-color: var(--color-error-bg);
  color: var(--color-error);
}

.activity-log-actions {
  display: flex;
  gap: var(--space-xs);
  align-items: center;
}

.btn-text {
  background: none;
  border: none;
  color: var(--figma-color-text-secondary);
  font-size: var(--font-size-xs);
  cursor: pointer;
  padding: var(--space-xs);
}

.btn-text:hover {
  color: var(--figma-color-text);
}

.activity-log-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--space-sm) 0;
}

.activity-log-empty {
  padding: var(--space-lg);
  text-align: center;
  color: var(--figma-color-text-tertiary);
  font-size: var(--font-size-sm);
}

.activity-log-list {
  display: flex;
  flex-direction: column;
}

.activity-log-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-sm);
  padding: var(--space-xs) var(--space-lg);
  transition: background-color 0.15s ease;
}

.activity-log-item:hover {
  background-color: var(--figma-color-bg);
}

.activity-log-item.success .status-icon {
  color: var(--color-success);
}

.activity-log-item.failed .status-icon {
  color: var(--color-error);
}

.activity-item-status {
  flex-shrink: 0;
  width: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.status-icon {
  font-size: var(--font-size-sm);
  font-weight: 600;
}

.activity-item-content {
  flex: 1;
  min-width: 0;
}

.activity-item-header {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  flex-wrap: wrap;
}

.activity-node-name {
  font-size: var(--font-size-xs);
  font-weight: 500;
  max-width: 120px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.activity-property {
  font-size: var(--font-size-xs);
  color: var(--figma-color-text-tertiary);
  font-family: monospace;
}

.activity-action-type {
  font-size: 9px;
  padding: 1px 4px;
  border-radius: 2px;
  background-color: var(--figma-color-bg);
  color: var(--figma-color-text-secondary);
  text-transform: uppercase;
}

.activity-item-change {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  margin-top: 2px;
  font-size: var(--font-size-xs);
}

.activity-before {
  color: var(--color-error);
  font-family: monospace;
  max-width: 100px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.activity-arrow {
  color: var(--figma-color-text-tertiary);
}

.activity-after {
  color: var(--color-success);
  font-family: monospace;
  max-width: 100px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.activity-error {
  font-size: var(--font-size-xs);
  color: var(--color-error);
  margin-top: 2px;
}

.activity-item-time {
  flex-shrink: 0;
  font-size: 9px;
  color: var(--figma-color-text-tertiary);
}

/* =============================================
   Ignored State
   ============================================= */
.result-item.ignored {
  opacity: 0.5;
}

.result-item.ignored .severity-indicator {
  background-color: var(--figma-color-text-tertiary);
}

.ignored-badge {
  display: inline-block;
  font-size: 9px;
  font-weight: 500;
  padding: 1px 4px;
  border-radius: 2px;
  background-color: var(--figma-color-text-tertiary);
  color: white;
  margin-right: var(--space-xs);
  text-transform: uppercase;
}

/* Ignore button */
.btn-ignore {
  background-color: var(--figma-color-text-tertiary);
  color: white;
  font-size: var(--font-size-xs);
  padding: var(--space-xs) var(--space-sm);
}

.btn-ignore:hover {
  background-color: var(--figma-color-text-secondary);
}

.btn-ignore:disabled {
  background-color: var(--figma-color-border);
  cursor: not-allowed;
}

/* =============================================
   All Issues Resolved Success State
   ============================================= */
.results-success {
  color: var(--color-success);
}

.results-success-icon {
  margin-bottom: var(--space-md);
  color: var(--color-success);
}

.results-success-title {
  font-size: var(--font-size-lg);
  font-weight: 600;
  color: var(--color-success);
  margin-bottom: var(--space-xs);
}

.results-success-subtitle {
  font-size: var(--font-size-sm);
  color: var(--figma-color-text-secondary);
}
</style>
  </head>
  <body>
    <div id="app"></div>
    <script>"use strict";(()=>{var re,S,Ie,yt,q,Le,Pe,Ae,Ee,ve,ge,me,bt,ee={},Re=[],xt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,le=Array.isArray;function j(e,t){for(var o in t)e[o]=t[o];return e}function ye(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function kt(e,t,o){var i,l,s,r={};for(s in t)s=="key"?i=t[s]:s=="ref"?l=t[s]:r[s]=t[s];if(arguments.length>2&&(r.children=arguments.length>3?re.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)r[s]===void 0&&(r[s]=e.defaultProps[s]);return se(e,r,i,l,null)}function se(e,t,o,i,l){var s={type:e,props:t,key:o,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++Ie,__i:-1,__u:0};return l==null&&S.vnode!=null&&S.vnode(s),s}function W(e){return e.children}function ie(e,t){this.props=e,this.context=t}function J(e,t){if(t==null)return e.__?J(e.__,e.__i+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?J(e):null}function Fe(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return Fe(e)}}function we(e){(!e.__d&&(e.__d=!0)&&q.push(e)&&!ae.__r++||Le!=S.debounceRendering)&&((Le=S.debounceRendering)||Pe)(ae)}function ae(){for(var e,t,o,i,l,s,r,d=1;q.length;)q.length>d&&q.sort(Ae),e=q.shift(),d=q.length,e.__d&&(o=void 0,i=void 0,l=(i=(t=e).__v).__e,s=[],r=[],t.__P&&((o=j({},i)).__v=i.__v+1,S.vnode&&S.vnode(o),be(t.__P,o,i,t.__n,t.__P.namespaceURI,32&i.__u?[l]:null,s,l??J(i),!!(32&i.__u),r),o.__v=i.__v,o.__.__k[o.__i]=o,De(s,o,r),i.__e=i.__=null,o.__e!=l&&Fe(o)));ae.__r=0}function Ve(e,t,o,i,l,s,r,d,p,c,f){var a,g,_,b,L,C,y,v=i&&i.__k||Re,N=t.length;for(p=Nt(o,t,v,p,N),a=0;a<N;a++)(_=o.__k[a])!=null&&(g=_.__i==-1?ee:v[_.__i]||ee,_.__i=a,C=be(e,_,g,l,s,r,d,p,c,f),b=_.__e,_.ref&&g.ref!=_.ref&&(g.ref&&xe(g.ref,null,_),f.push(_.ref,_.__c||b,_)),L==null&&b!=null&&(L=b),(y=!!(4&_.__u))||g.__k===_.__k?p=Me(_,p,e,y):typeof _.type=="function"&&C!==void 0?p=C:b&&(p=b.nextSibling),_.__u&=-7);return o.__e=L,p}function Nt(e,t,o,i,l){var s,r,d,p,c,f=o.length,a=f,g=0;for(e.__k=new Array(l),s=0;s<l;s++)(r=t[s])!=null&&typeof r!="boolean"&&typeof r!="function"?(typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?r=e.__k[s]=se(null,r,null,null,null):le(r)?r=e.__k[s]=se(W,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?r=e.__k[s]=se(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):e.__k[s]=r,p=s+g,r.__=e,r.__b=e.__b+1,d=null,(c=r.__i=St(r,o,p,a))!=-1&&(a--,(d=o[c])&&(d.__u|=2)),d==null||d.__v==null?(c==-1&&(l>f?g--:l<f&&g++),typeof r.type!="function"&&(r.__u|=4)):c!=p&&(c==p-1?g--:c==p+1?g++:(c>p?g--:g++,r.__u|=4))):e.__k[s]=null;if(a)for(s=0;s<f;s++)(d=o[s])!=null&&!(2&d.__u)&&(d.__e==i&&(i=J(d)),He(d,d));return i}function Me(e,t,o,i){var l,s;if(typeof e.type=="function"){for(l=e.__k,s=0;l&&s<l.length;s++)l[s]&&(l[s].__=e,t=Me(l[s],t,o,i));return t}e.__e!=t&&(i&&(t&&e.type&&!t.parentNode&&(t=J(e)),o.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function St(e,t,o,i){var l,s,r,d=e.key,p=e.type,c=t[o],f=c!=null&&(2&c.__u)==0;if(c===null&&d==null||f&&d==c.key&&p==c.type)return o;if(i>(f?1:0)){for(l=o-1,s=o+1;l>=0||s<t.length;)if((c=t[r=l>=0?l--:s++])!=null&&!(2&c.__u)&&d==c.key&&p==c.type)return r}return-1}function Ce(e,t,o){t[0]=="-"?e.setProperty(t,o??""):e[t]=o==null?"":typeof o!="number"||xt.test(t)?o:o+"px"}function oe(e,t,o,i,l){var s,r;e:if(t=="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)o&&t in o||Ce(e.style,t,"");if(o)for(t in o)i&&o[t]==i[t]||Ce(e.style,t,o[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(Ee,"$1")),r=t.toLowerCase(),t=r in e||t=="onFocusOut"||t=="onFocusIn"?r.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=o,o?i?o.u=i.u:(o.u=ve,e.addEventListener(t,s?me:ge,s)):e.removeEventListener(t,s?me:ge,s);else{if(l=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&o==1?"":o))}}function Te(e){return function(t){if(this.l){var o=this.l[t.type+e];if(t.t==null)t.t=ve++;else if(t.t<o.u)return;return o(S.event?S.event(t):t)}}}function be(e,t,o,i,l,s,r,d,p,c){var f,a,g,_,b,L,C,y,v,N,E,k,M,B,z,U,H,R=t.type;if(t.constructor!==void 0)return null;128&o.__u&&(p=!!(32&o.__u),s=[d=t.__e=o.__e]),(f=S.__b)&&f(t);e:if(typeof R=="function")try{if(y=t.props,v="prototype"in R&&R.prototype.render,N=(f=R.contextType)&&i[f.__c],E=f?N?N.props.value:f.__:i,o.__c?C=(a=t.__c=o.__c).__=a.__E:(v?t.__c=a=new R(y,E):(t.__c=a=new ie(y,E),a.constructor=R,a.render=wt),N&&N.sub(a),a.state||(a.state={}),a.__n=i,g=a.__d=!0,a.__h=[],a._sb=[]),v&&a.__s==null&&(a.__s=a.state),v&&R.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=j({},a.__s)),j(a.__s,R.getDerivedStateFromProps(y,a.__s))),_=a.props,b=a.state,a.__v=t,g)v&&R.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),v&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(v&&R.getDerivedStateFromProps==null&&y!==_&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(y,E),t.__v==o.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(y,a.__s,E)===!1){for(t.__v!=o.__v&&(a.props=y,a.state=a.__s,a.__d=!1),t.__e=o.__e,t.__k=o.__k,t.__k.some(function(h){h&&(h.__=t)}),k=0;k<a._sb.length;k++)a.__h.push(a._sb[k]);a._sb=[],a.__h.length&&r.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(y,a.__s,E),v&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(_,b,L)})}if(a.context=E,a.props=y,a.__P=e,a.__e=!1,M=S.__r,B=0,v){for(a.state=a.__s,a.__d=!1,M&&M(t),f=a.render(a.props,a.state,a.context),z=0;z<a._sb.length;z++)a.__h.push(a._sb[z]);a._sb=[]}else do a.__d=!1,M&&M(t),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++B<25);a.state=a.__s,a.getChildContext!=null&&(i=j(j({},i),a.getChildContext())),v&&!g&&a.getSnapshotBeforeUpdate!=null&&(L=a.getSnapshotBeforeUpdate(_,b)),U=f,f!=null&&f.type===W&&f.key==null&&(U=Ue(f.props.children)),d=Ve(e,le(U)?U:[U],t,o,i,l,s,r,d,p,c),a.base=t.__e,t.__u&=-161,a.__h.length&&r.push(a),C&&(a.__E=a.__=null)}catch(h){if(t.__v=null,p||s!=null)if(h.then){for(t.__u|=p?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;s[s.indexOf(d)]=null,t.__e=d}else{for(H=s.length;H--;)ye(s[H]);he(t)}else t.__e=o.__e,t.__k=o.__k,h.then||he(t);S.__e(h,t,o)}else s==null&&t.__v==o.__v?(t.__k=o.__k,t.__e=o.__e):d=t.__e=Lt(o.__e,t,o,i,l,s,r,p,c);return(f=S.diffed)&&f(t),128&t.__u?void 0:d}function he(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(he)}function De(e,t,o){for(var i=0;i<o.length;i++)xe(o[i],o[++i],o[++i]);S.__c&&S.__c(t,e),e.some(function(l){try{e=l.__h,l.__h=[],e.some(function(s){s.call(l)})}catch(s){S.__e(s,l.__v)}})}function Ue(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:le(e)?e.map(Ue):j({},e)}function Lt(e,t,o,i,l,s,r,d,p){var c,f,a,g,_,b,L,C=o.props||ee,y=t.props,v=t.type;if(v=="svg"?l="http://www.w3.org/2000/svg":v=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((_=s[c])&&"setAttribute"in _==!!v&&(v?_.localName==v:_.nodeType==3)){e=_,s[c]=null;break}}if(e==null){if(v==null)return document.createTextNode(y);e=document.createElementNS(l,v,y.is&&y),d&&(S.__m&&S.__m(t,s),d=!1),s=null}if(v==null)C===y||d&&e.data==y||(e.data=y);else{if(s=s&&re.call(e.childNodes),!d&&s!=null)for(C={},c=0;c<e.attributes.length;c++)C[(_=e.attributes[c]).name]=_.value;for(c in C)if(_=C[c],c!="children"){if(c=="dangerouslySetInnerHTML")a=_;else if(!(c in y)){if(c=="value"&&"defaultValue"in y||c=="checked"&&"defaultChecked"in y)continue;oe(e,c,null,_,l)}}for(c in y)_=y[c],c=="children"?g=_:c=="dangerouslySetInnerHTML"?f=_:c=="value"?b=_:c=="checked"?L=_:d&&typeof _!="function"||C[c]===_||oe(e,c,_,C[c],l);if(f)d||a&&(f.__html==a.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(a&&(e.innerHTML=""),Ve(t.type=="template"?e.content:e,le(g)?g:[g],t,o,i,v=="foreignObject"?"http://www.w3.org/1999/xhtml":l,s,r,s?s[0]:o.__k&&J(o,0),d,p),s!=null)for(c=s.length;c--;)ye(s[c]);d||(c="value",v=="progress"&&b==null?e.removeAttribute("value"):b!=null&&(b!==e[c]||v=="progress"&&!b||v=="option"&&b!=C[c])&&oe(e,c,b,C[c],l),c="checked",L!=null&&L!=e[c]&&oe(e,c,L,C[c],l))}return e}function xe(e,t,o){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(l){S.__e(l,o)}}function He(e,t,o){var i,l;if(S.unmount&&S.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||xe(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){S.__e(s,t)}i.base=i.__P=null}if(i=e.__k)for(l=0;l<i.length;l++)i[l]&&He(i[l],t,o||typeof e.type!="function");o||ye(e.__e),e.__c=e.__=e.__e=void 0}function wt(e,t,o){return this.constructor(e,o)}function Oe(e,t,o){var i,l,s,r;t==document&&(t=document.documentElement),S.__&&S.__(e,t),l=(i=typeof o=="function")?null:o&&o.__k||t.__k,s=[],r=[],be(t,e=(!i&&o||t).__k=kt(W,null,[e]),l||ee,ee,t.namespaceURI,!i&&o?[o]:l?null:t.firstChild?re.call(t.childNodes):null,s,!i&&o?o:l?l.__e:t.firstChild,i,r),De(s,e,r)}re=Re.slice,S={__e:function(e,t,o,i){for(var l,s,r;t=t.__;)if((l=t.__c)&&!l.__)try{if((s=l.constructor)&&s.getDerivedStateFromError!=null&&(l.setState(s.getDerivedStateFromError(e)),r=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(e,i||{}),r=l.__d),r)return l.__E=l}catch(d){e=d}throw e}},Ie=0,yt=function(e){return e!=null&&e.constructor===void 0},ie.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=j({},this.state),typeof e=="function"&&(e=e(j({},o),this.props)),e&&j(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),we(this))},ie.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),we(this))},ie.prototype.render=W,q=[],Pe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ae=function(e,t){return e.__v.__b-t.__v.__b},ae.__r=0,Ee=/(PointerCapture)$|Capture$/i,ve=0,ge=Te(!1),me=Te(!0),bt=0;var te,P,ke,Be,de=0,qe=[],A=S,$e=A.__b,je=A.__r,We=A.diffed,ze=A.__c,Ge=A.unmount,Ke=A.__;function Se(e,t){A.__h&&A.__h(P,e,de||t),de=0;var o=P.__H||(P.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function I(e){return de=1,Ct(Qe,e)}function Ct(e,t,o){var i=Se(te++,2);if(i.t=e,!i.__c&&(i.__=[o?o(t):Qe(void 0,t),function(d){var p=i.__N?i.__N[0]:i.__[0],c=i.t(p,d);p!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=P,!P.__f)){var l=function(d,p,c){if(!i.__c.__H)return!0;var f=i.__c.__H.__.filter(function(g){return!!g.__c});if(f.every(function(g){return!g.__N}))return!s||s.call(this,d,p,c);var a=i.__c.props!==d;return f.forEach(function(g){if(g.__N){var _=g.__[0];g.__=g.__N,g.__N=void 0,_!==g.__[0]&&(a=!0)}}),s&&s.call(this,d,p,c)||a};P.__f=!0;var s=P.shouldComponentUpdate,r=P.componentWillUpdate;P.componentWillUpdate=function(d,p,c){if(this.__e){var f=s;s=void 0,l(d,p,c),s=f}r&&r.call(this,d,p,c)},P.shouldComponentUpdate=l}return i.__N||i.__}function ne(e,t){var o=Se(te++,3);!A.__s&&Ye(o.__H,t)&&(o.__=e,o.u=t,P.__H.__h.push(o))}function Z(e,t){var o=Se(te++,7);return Ye(o.__H,t)&&(o.__=e(),o.__H=t,o.__h=e),o.__}function V(e,t){return de=8,Z(function(){return e},t)}function Tt(){for(var e;e=qe.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ce),e.__H.__h.forEach(Ne),e.__H.__h=[]}catch(t){e.__H.__h=[],A.__e(t,e.__v)}}A.__b=function(e){P=null,$e&&$e(e)},A.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ke&&Ke(e,t)},A.__r=function(e){je&&je(e),te=0;var t=(P=e.__c).__H;t&&(ke===P?(t.__h=[],P.__h=[],t.__.forEach(function(o){o.__N&&(o.__=o.__N),o.u=o.__N=void 0})):(t.__h.forEach(ce),t.__h.forEach(Ne),t.__h=[],te=0)),ke=P},A.diffed=function(e){We&&We(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(qe.push(t)!==1&&Be===A.requestAnimationFrame||((Be=A.requestAnimationFrame)||It)(Tt)),t.__H.__.forEach(function(o){o.u&&(o.__H=o.u),o.u=void 0})),ke=P=null},A.__c=function(e,t){t.some(function(o){try{o.__h.forEach(ce),o.__h=o.__h.filter(function(i){return!i.__||Ne(i)})}catch(i){t.some(function(l){l.__h&&(l.__h=[])}),t=[],A.__e(i,o.__v)}}),ze&&ze(e,t)},A.unmount=function(e){Ge&&Ge(e);var t,o=e.__c;o&&o.__H&&(o.__H.__.forEach(function(i){try{ce(i)}catch(l){t=l}}),o.__H=void 0,t&&A.__e(t,o.__v))};var Xe=typeof requestAnimationFrame=="function";function It(e){var t,o=function(){clearTimeout(i),Xe&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(o,35);Xe&&(t=requestAnimationFrame(o))}function ce(e){var t=P,o=e.__c;typeof o=="function"&&(e.__c=void 0,o()),P=t}function Ne(e){var t=P;e.__c=e.__(),P=t}function Ye(e,t){return!e||e.length!==t.length||t.some(function(o,i){return o!==e[i]})}function Qe(e,t){return typeof t=="function"?t(e):t}function Je(){return{rules:{"no-hardcoded-colors":{enabled:!0,severity:"error"},"no-hardcoded-typography":{enabled:!0,severity:"warning"},"no-hardcoded-spacing":{enabled:!0,severity:"warning"},"no-hardcoded-radii":{enabled:!0,severity:"warning"},"no-orphaned-variables":{enabled:!0,severity:"error"},"no-unknown-styles":{enabled:!0,severity:"warning"}},skipHiddenLayers:!0,skipLockedLayers:!1}}var Pt=0,zt=Array.isArray;function n(e,t,o,i,l,s){t||(t={});var r,d,p=t;if("ref"in p)for(d in p={},t)d=="ref"?r=t[d]:p[d]=t[d];var c={type:e,props:p,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Pt,__i:-1,__u:0,__source:l,__self:s};if(typeof e=="function"&&(r=e.defaultProps))for(d in r)p[d]===void 0&&(p[d]=r[d]);return S.vnode&&S.vnode(c),c}function Ze({onScan:e,isScanning:t,scope:o,onScopeChange:i,onExport:l,hasResults:s,view:r,onViewChange:d}){let[p,c]=I(!1);return n("header",{className:"header",children:[n("h1",{children:"Lint Roller"}),n("div",{className:"header-controls",children:[n("select",{className:"select",value:o,onChange:f=>i(f.target.value),disabled:t,children:[n("option",{value:"selection",children:"Selection"}),n("option",{value:"current_page",children:"Current Page"}),n("option",{value:"full_document",children:"Full Document"})]}),n("button",{className:"btn btn-primary",onClick:e,disabled:t,children:t?"Scanning...":"Scan"}),n("div",{className:"export-menu",children:[n("button",{className:"btn btn-secondary",onClick:()=>c(!p),disabled:!s,children:"Export"}),p&&n("div",{className:"export-dropdown",children:[n("button",{onClick:()=>{l("json"),c(!1)},children:"Export JSON"}),n("button",{onClick:()=>{l("csv"),c(!1)},children:"Export CSV"})]})]}),n("button",{className:"btn btn-icon",onClick:()=>d(r==="results"?"config":"results"),title:r==="results"?"Settings":"Results",children:r==="results"?"\u2699":"\u2190"})]})]})}function et({results:e,fixedViolations:t,ignoredViolations:o}){let{metadata:i}=e,l=Z(()=>{let r=0,d={error:0,warning:0,info:0};for(let p of e.violations){let c=p.nodeId+":"+p.property;!t.has(c)&&!o.has(c)&&(r++,d[p.severity]++)}return{total:r,bySeverity:d}},[e.violations,t,o]),s=t.size+o.size;return n("div",{className:"summary",children:n("div",{className:"stat-cards",children:[n("div",{className:`stat-card ${l.total>0?"warning":"success"}`,children:[n("div",{className:"value",children:l.total}),n("div",{className:"label",children:s>0?`Remaining (${s} resolved)`:"Total Issues"})]}),n("div",{className:`stat-card ${l.bySeverity.error>0?"error":""}`,children:[n("div",{className:"value",children:l.bySeverity.error}),n("div",{className:"label",children:"Errors"})]}),n("div",{className:`stat-card ${l.bySeverity.warning>0?"warning":""}`,children:[n("div",{className:"value",children:l.bySeverity.warning}),n("div",{className:"label",children:"Warnings"})]}),n("div",{className:"stat-card",children:[n("div",{className:"value",children:i.scannedNodes}),n("div",{className:"label",children:"Nodes Scanned"})]})]})})}function tt({processed:e,total:t}){let o=t>0?Math.round(e/t*100):0;return n("div",{className:"progress-container",children:[n("div",{className:"progress-bar",children:n("div",{className:"fill",style:{width:`${o}%`}})}),n("div",{className:"progress-text",children:["Scanning... ",e," / ",t," nodes (",o,"%)"]})]})}function nt({violations:e,fixedViolations:t,isFixing:o,onFixAll:i,onAutoFixPathMismatches:l,fixProgress:s,showActivityLog:r,onToggleActivityLog:d,activityCount:p}){let c=e.length,f=e.filter(N=>N.suggestedToken),a=f.filter(N=>t.has(N.nodeId+":"+N.property)),g=f.filter(N=>!t.has(N.nodeId+":"+N.property)),_=e.filter(N=>!N.suggestedToken),b=e.filter(N=>N.isPathMismatch&&!t.has(N.nodeId+":"+N.property)),L=c>0?a.length/c*100:0,C=c>0?b.length/c*100:0,y=c>0?(g.length-b.length)/c*100:0,v=c>0?_.length/c*100:0;return c===0?null:n("div",{className:"fix-status-bar",children:[n("div",{className:"fix-status-header",children:[n("span",{className:"fix-status-title",children:"Fix Status"}),n("div",{className:"fix-status-actions",children:[b.length>0&&n("button",{className:"btn btn-auto-fix",onClick:l,disabled:o,title:"Auto-fix all path notation mismatches (/ vs . syntax)",children:["Auto-fix ",b.length," Path ",b.length===1?"Mismatch":"Mismatches"]}),g.length>0&&n("button",{className:"btn btn-fix-all-compact",onClick:i,disabled:o,children:o?"Fixing...":"Fix "+g.length+" Issues"}),n("button",{className:"btn btn-activity-toggle"+(r?" active":""),onClick:d,title:r?"Hide activity log":"Show activity log",children:["Activity",p>0?" ("+p+")":""]})]})]}),o&&s&&n("div",{className:"fix-progress-indicator",children:[n("div",{className:"fix-progress-text",children:["Fixing ",s.current," of ",s.total,"..."]}),n("div",{className:"fix-progress-bar-active",children:n("div",{className:"fix-progress-bar-fill",style:{width:s.current/s.total*100+"%"}})})]}),n("div",{className:"fix-progress-bar",children:[n("div",{className:"fix-progress-segment fixed",style:{width:L+"%"},title:a.length+" fixed"}),n("div",{className:"fix-progress-segment path-mismatch",style:{width:C+"%"},title:b.length+" path mismatches (auto-fixable)"}),n("div",{className:"fix-progress-segment fixable",style:{width:y+"%"},title:g.length-b.length+" can be fixed"}),n("div",{className:"fix-progress-segment unfixable",style:{width:v+"%"},title:_.length+" cannot be auto-fixed"})]}),n("div",{className:"fix-status-legend",children:[n("div",{className:"fix-legend-item",children:[n("span",{className:"fix-legend-dot fixed"}),n("span",{className:"fix-legend-count",children:a.length}),n("span",{className:"fix-legend-label",children:"Fixed"})]}),b.length>0&&n("div",{className:"fix-legend-item",children:[n("span",{className:"fix-legend-dot path-mismatch"}),n("span",{className:"fix-legend-count",children:b.length}),n("span",{className:"fix-legend-label",children:"Path Mismatch"})]}),n("div",{className:"fix-legend-item",children:[n("span",{className:"fix-legend-dot fixable"}),n("span",{className:"fix-legend-count",children:g.length-b.length}),n("span",{className:"fix-legend-label",children:"Fixable"})]}),n("div",{className:"fix-legend-item",children:[n("span",{className:"fix-legend-dot unfixable"}),n("span",{className:"fix-legend-count",children:_.length}),n("span",{className:"fix-legend-label",children:"Manual"})]})]})]})}function At(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}function Et(e){return e==="success"?"\u2713":"\u2717"}function Rt(e){switch(e){case"rebind":return"Rebound";case"unbind":return"Unbound";case"detach":return"Detached";default:return"Fixed"}}function ot({actions:e,isVisible:t,onClose:o,onClear:i}){if(!t)return null;let l=e.filter(r=>r.status==="success").length,s=e.filter(r=>r.status==="failed").length;return n("div",{className:"activity-log",children:[n("div",{className:"activity-log-header",children:[n("div",{className:"activity-log-title",children:[n("span",{className:"activity-log-title-text",children:"Activity Log"}),n("span",{className:"activity-log-counts",children:[n("span",{className:"activity-count success",children:[l," success"]}),s>0&&n("span",{className:"activity-count failed",children:[s," failed"]})]})]}),n("div",{className:"activity-log-actions",children:[e.length>0&&n("button",{className:"btn btn-text",onClick:i,title:"Clear activity log",children:"Clear"}),n("button",{className:"btn btn-icon",onClick:o,title:"Close activity log",children:"\xD7"})]})]}),n("div",{className:"activity-log-content",children:e.length===0?n("div",{className:"activity-log-empty",children:'No fix actions yet. Click "Fix" on a violation to see activity here.'}):n("div",{className:"activity-log-list",children:[...e].reverse().map((r,d)=>n("div",{className:"activity-log-item "+r.status,children:[n("div",{className:"activity-item-status",children:n("span",{className:"status-icon "+r.status,children:Et(r.status)})}),n("div",{className:"activity-item-content",children:[n("div",{className:"activity-item-header",children:[n("span",{className:"activity-node-name",title:r.nodeName,children:r.nodeName}),n("span",{className:"activity-property",children:[".",r.property]}),n("span",{className:"activity-action-type",children:Rt(r.actionType)})]}),n("div",{className:"activity-item-change",children:[n("span",{className:"activity-before",title:r.beforeValue,children:r.beforeValue}),n("span",{className:"activity-arrow",children:"\u2192"}),n("span",{className:"activity-after",title:r.afterValue,children:r.afterValue})]}),r.status==="failed"&&r.errorMessage&&n("div",{className:"activity-error",children:r.errorMessage})]}),n("div",{className:"activity-item-time",children:At(r.timestamp)})]},e.length-1-d))})})]})}function st(e){switch(e){case"exact":return"confidence-exact";case"close":return"confidence-close";case"approximate":return"confidence-approximate";default:return""}}function Ft(e){switch(e){case"exact":return"Exact match";case"close":return"Close match";case"approximate":return"Approximate";default:return""}}function it({violation:e,showNodeInfo:t,showRuleInfo:o,onSelect:i,onFix:l,onUnbind:s,onDetach:r,onApplyStyle:d,onIgnore:p,isFixed:c,isIgnored:f,isFixing:a}){let[g,_]=I(!1),b=e.alternativeTokens&&e.alternativeTokens.length>0,L=c||f,C=e.suggestedToken&&!L,y=e.canUnbind&&!L,v=e.canDetach&&!L,N=e.canApplyTextStyle&&e.suggestedTextStyle&&!L,E=e.canIgnore&&!L;return n("div",{className:"result-item "+e.severity+(c?" fixed":"")+(f?" ignored":""),onClick:i,children:[n("div",{className:"severity-indicator"}),n("div",{className:"content",children:[t&&n("div",{className:"node-info",children:[n("span",{className:"node-name",children:e.nodeName}),n("span",{className:"node-type",children:e.nodeType})]}),n("div",{className:"message",children:[c&&n("span",{className:"fixed-badge",children:"Fixed"}),f&&n("span",{className:"ignored-badge",children:"Ignored"}),e.isPathMismatch&&!L&&n("span",{className:"path-mismatch-badge",title:"Auto-fixable: Only path syntax differs (/ vs .)",children:"Path Mismatch"}),e.message]}),e.suggestedToken&&!L&&n("div",{className:"suggestion "+st(e.suggestionConfidence),children:[n("span",{className:"suggestion-label",children:[e.suggestionConfidence&&n("span",{className:"confidence-badge "+st(e.suggestionConfidence),children:Ft(e.suggestionConfidence)}),"Use: ",n("code",{children:e.suggestedToken})]}),b&&n("button",{className:"alternatives-toggle",onClick:k=>{k.stopPropagation(),_(!g)},children:[g?"Hide":"Show"," ",e.alternativeTokens.length," more"]})]}),g&&b&&!L&&n("div",{className:"alternatives-list",children:e.alternativeTokens.map((k,M)=>n("div",{className:"alternative-item",children:[n("code",{children:k.path}),n("span",{className:"alternative-distance",children:[typeof k.value=="string"?k.value:k.value+"px"," - ",k.description]})]},M))}),e.suggestedTextStyle&&!L&&n("div",{className:"suggestion "+(e.suggestedTextStyle.matchQuality==="exact"?"confidence-exact":"confidence-close"),children:n("span",{className:"suggestion-label",children:[n("span",{className:"confidence-badge "+(e.suggestedTextStyle.matchQuality==="exact"?"confidence-exact":"confidence-close"),children:e.suggestedTextStyle.matchQuality==="exact"?"Exact match":"Partial match"}),"Apply style: ",n("code",{children:e.suggestedTextStyle.name})]})})]}),n("div",{className:"result-item-actions",children:[C&&n("button",{className:"btn btn-fix",onClick:k=>{k.stopPropagation(),l()},disabled:a,title:y?"Rebind to suggested token":"Apply suggested fix",children:y?"Rebind":"Fix"}),y&&n("button",{className:"btn btn-unbind",onClick:k=>{k.stopPropagation(),s()},disabled:a,title:"Remove variable binding (keeps current value)",children:"Unbind"}),v&&n("button",{className:"btn btn-detach",onClick:k=>{k.stopPropagation(),r()},disabled:a,title:"Detach style (keeps current appearance)",children:"Detach"}),N&&n("button",{className:"btn btn-apply-style",onClick:k=>{k.stopPropagation(),d()},disabled:a,title:"Apply text style: "+e.suggestedTextStyle.name,children:"Apply Style"}),E&&n("button",{className:"btn btn-ignore",onClick:k=>{k.stopPropagation(),p()},disabled:a,title:"Ignore this issue (no matching style within tolerance)",children:"Ignore"}),n("button",{className:"btn btn-icon select-btn",onClick:k=>{k.stopPropagation(),i()},title:"Select in Figma",children:"\u2192"})]})]})}var Vt={"no-hardcoded-colors":"Hardcoded Colors","no-hardcoded-typography":"Hardcoded Typography","no-hardcoded-spacing":"Hardcoded Spacing","no-hardcoded-radii":"Hardcoded Radii","no-orphaned-variables":"Orphaned Variables","no-unknown-styles":"Unknown Styles"};function at({results:e,groupBy:t,onGroupByChange:o,onSelectNode:i,onFix:l,onBulkFix:s,onUnbind:r,onDetach:d,onBulkDetach:p,onApplyStyle:c,onIgnore:f,fixedViolations:a,ignoredViolations:g,isFixing:_,fixableCount:b}){let[L,C]=I(new Set),y=Z(()=>{if(!e)return{};let h={};for(let T of e.violations){let x=t==="rule"?T.ruleId:T.nodeId;h[x]||(h[x]=[]),h[x].push(T)}return h},[e,t]),v=h=>{let T=new Set(L);T.has(h)?T.delete(h):T.add(h),C(T)};Z(()=>{e&&C(new Set(Object.keys(y)))},[e]);let N=h=>a.has(h.nodeId+":"+h.property),E=h=>g.has(h.nodeId+":"+h.property),k=h=>N(h)||E(h),M=h=>h.filter(T=>!k(T)),B=h=>h.filter(T=>T.suggestedToken&&!k(T)),z=h=>h.filter(T=>T.canDetach&&!k(T));if(!e)return n("div",{className:"results-container",children:n("div",{className:"results-empty",children:[n("div",{className:"results-empty-icon",children:"?"}),n("p",{children:"No results yet"}),n("p",{children:'Click "Scan" to lint your design tokens'})]})});if(e.violations.length===0)return n("div",{className:"results-container",children:n("div",{className:"results-empty results-success",children:[n("div",{className:"results-success-icon",children:n("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n("circle",{cx:"24",cy:"24",r:"22",stroke:"currentColor",strokeWidth:"3"}),n("path",{d:"M14 24L21 31L34 18",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]})}),n("p",{className:"results-success-title",children:"No issues found!"}),n("p",{className:"results-success-subtitle",children:"All checked nodes use proper design tokens"})]})});let U=e.violations.filter(h=>!k(h)).length,H=a.size+g.size;if(U===0&&H>0)return n("div",{className:"results-container",children:n("div",{className:"results-empty results-success",children:[n("div",{className:"results-success-icon",children:n("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n("circle",{cx:"24",cy:"24",r:"22",stroke:"currentColor",strokeWidth:"3"}),n("path",{d:"M14 24L21 31L34 18",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]})}),n("p",{className:"results-success-title",children:"All issues resolved!"}),n("p",{className:"results-success-subtitle",children:[H," issue",H!==1?"s":""," fixed or ignored"]})]})});let R=Object.keys(y).filter(h=>M(y[h]).length>0);return n("div",{className:"results-container",children:[n("div",{className:"results-toolbar",children:[n("div",{className:"tabs",children:[n("button",{className:"tab "+(t==="rule"?"active":""),onClick:()=>o("rule"),children:"By Rule"}),n("button",{className:"tab "+(t==="node"?"active":""),onClick:()=>o("node"),children:"By Node"})]}),b>0&&n("button",{className:"btn btn-fix-all",onClick:()=>s(e.violations),disabled:_,children:_?"Fixing...":"Fix All ("+b+")"})]}),n("div",{style:{padding:"var(--space-sm)"},children:R.map(h=>{let T=y[h],x=M(T),G=L.has(h),ue=t==="rule"?Vt[h]||h:T[0]?.nodeName||h,Y=B(T),K=z(T),pe=h==="no-unknown-styles";return n("div",{className:"results-group",children:[n("div",{className:"results-group-header",onClick:()=>v(h),children:[n("span",{className:"results-group-title",children:[n("span",{className:"results-group-caret"+(G?" expanded":""),children:"\u25B6"}),ue]}),n("div",{className:"results-group-actions",children:[Y.length>0&&n("button",{className:"btn btn-fix-group",onClick:F=>{F.stopPropagation(),s(Y)},disabled:_,title:"Fix "+Y.length+" issues in this group",children:["Fix (",Y.length,")"]}),pe&&K.length>0&&n("button",{className:"btn btn-detach-group",onClick:F=>{F.stopPropagation(),p(K)},disabled:_,title:"Detach "+K.length+" styles in this group",children:["Detach All (",K.length,")"]}),n("span",{className:"results-group-count",children:x.length})]})]}),G&&n("div",{className:"results-group-items",children:x.map(F=>n(it,{violation:F,showNodeInfo:t==="rule",showRuleInfo:t==="node",onSelect:()=>i(F.nodeId),onFix:()=>l(F),onUnbind:()=>r(F),onDetach:()=>d(F),onApplyStyle:()=>c(F),onIgnore:()=>f(F),isFixed:N(F),isIgnored:E(F),isFixing:_},F.id))})]},h)})})]})}var Mt=[{id:"no-hardcoded-colors",name:"No Hardcoded Colors",description:"Flags fills and strokes using literal colors"},{id:"no-hardcoded-typography",name:"No Hardcoded Typography",description:"Flags unbound font properties on text nodes"},{id:"no-hardcoded-spacing",name:"No Hardcoded Spacing",description:"Flags auto-layout frames with hardcoded gaps/padding"},{id:"no-hardcoded-radii",name:"No Hardcoded Radii",description:"Flags nodes with hardcoded corner radius"},{id:"no-orphaned-variables",name:"No Orphaned Variables",description:"Flags bindings to non-existent tokens"},{id:"no-unknown-styles",name:"No Unknown Styles",description:"Flags styles not in the token set"}];function rt({config:e,onChange:t}){let o=s=>{t({...e,rules:{...e.rules,[s]:{...e.rules[s],enabled:!e.rules[s].enabled}}})},i=(s,r)=>{t({...e,rules:{...e.rules,[s]:{...e.rules[s],severity:r}}})},l=s=>{t({...e,[s]:!e[s]})};return n("div",{className:"config-panel",style:{flex:1,overflowY:"auto"},children:[n("div",{className:"config-section",children:[n("h3",{children:"Rules"}),Mt.map(s=>n("div",{style:{marginBottom:"var(--space-md)",padding:"var(--space-sm)",backgroundColor:"var(--figma-color-bg)",borderRadius:"var(--radius-sm)"},children:[n("div",{className:"config-row",children:[n("div",{children:[n("div",{style:{fontWeight:500,fontSize:"var(--font-size-sm)"},children:s.name}),n("div",{style:{fontSize:"var(--font-size-xs)",color:"var(--figma-color-text-secondary)"},children:s.description})]}),n("label",{className:"toggle",children:[n("input",{type:"checkbox",checked:e.rules[s.id].enabled,onChange:()=>o(s.id)}),n("span",{className:"slider"})]})]}),e.rules[s.id].enabled&&n("div",{className:"config-row",style:{marginTop:"var(--space-sm)"},children:[n("span",{style:{fontSize:"var(--font-size-xs)",color:"var(--figma-color-text-secondary)"},children:"Severity"}),n("select",{className:"select",value:e.rules[s.id].severity,onChange:r=>i(s.id,r.target.value),children:[n("option",{value:"error",children:"Error"}),n("option",{value:"warning",children:"Warning"}),n("option",{value:"info",children:"Info"})]})]})]},s.id))]}),n("div",{className:"config-section",children:[n("h3",{children:"Scan Options"}),n("div",{className:"config-row",children:[n("label",{children:"Skip hidden layers"}),n("label",{className:"toggle",children:[n("input",{type:"checkbox",checked:e.skipHiddenLayers,onChange:()=>l("skipHiddenLayers")}),n("span",{className:"slider"})]})]}),n("div",{className:"config-row",children:[n("label",{children:"Skip locked layers"}),n("label",{className:"toggle",children:[n("input",{type:"checkbox",checked:e.skipLockedLayers,onChange:()=>l("skipLockedLayers")}),n("span",{className:"slider"})]})]})]})]})}var Dt="https://raw.githubusercontent.com/atlanticwaters/Tokens-Studio-Sandbox/main",Ut=["core/colors","core/neutrals","core/border","core/elevation","core/font-family","core/font-size","core/font-weight","core/letter-spacing","core/line-height","core/position","core/spacing","semantic/light","semantic/dark"];async function Ht(e){let t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch ${e}: ${t.status} ${t.statusText}`);return t.json()}async function lt(){let e=[];for(let t of Ut)try{let o=`${Dt}/${t}.json`;console.log(`[UI] Loading tokens from: ${o}`);let i=await Ht(o);e.push({path:t,content:i})}catch(o){console.warn(`[UI] Failed to load token file ${t}:`,o)}return console.log(`[UI] Loaded ${e.length} token files`),e}function ct(){let[e,t]=I(Je()),[o,i]=I(null),[l,s]=I(!1),[r,d]=I(!1),[p,c]=I({processed:0,total:0}),[f,a]=I("current_page"),[g,_]=I("results"),[b,L]=I("rule"),[C,y]=I(0),[v,N]=I(new Set),[E,k]=I(new Set),[M,B]=I([]),[z,U]=I(null),[H,R]=I(!1),[h,T]=I(!1),x=V(m=>{parent.postMessage({pluginMessage:m},"*")},[]),G=V(()=>{s(!0),i(null),x({type:"START_SCAN",scope:{type:f},config:e})},[f,e,x]);ne(()=>{let m=w=>{let u=w.data.pluginMessage;if(u)switch(u.type){case"SCAN_STARTED":c({processed:0,total:u.totalNodes}),N(new Set),B([]),U(null),R(!1);break;case"SCAN_PROGRESS":c({processed:u.processed,total:u.total});break;case"SCAN_COMPLETE":i(u.results),s(!1),_("results");break;case"NODE_SELECTED":break;case"TOKENS_LOADED":y(u.tokenCount);break;case"FIX_APPLIED":console.log("[UI] FIX_APPLIED received:",u),d(!1),U(null);let $={nodeId:u.nodeId,nodeName:u.nodeName||"Unknown",property:u.property,actionType:u.actionType||"rebind",beforeValue:u.beforeValue||"unknown",afterValue:u.afterValue||"unknown",status:u.success?"success":"failed",errorMessage:u.message,timestamp:Date.now()};if(B(D=>[...D,$]),u.success)N(D=>{let Q=new Set(D),X=u.nodeId+":"+u.property;if(Q.add(X),u.actionType==="apply-style"){let _e=["fontSize","lineHeight","letterSpacing"];for(let fe of _e)Q.add(u.nodeId+":"+fe)}return Q});else{let D=u.message||"Unknown error occurred";console.error("Fix failed:",D),alert("Fix failed: "+D)}break;case"FIX_PROGRESS":U({current:u.current,total:u.total}),B(D=>[...D,u.currentAction]);break;case"BULK_FIX_COMPLETE":d(!1),U(null),u.actions&&u.actions.length>0&&R(!0),u.failed>0&&(console.error("Bulk fix errors:",u.errors),alert("Fixed "+u.successful+" issues. "+u.failed+` failed.

`+u.errors.slice(0,3).join(`
`))),u.successful>0&&G();break;case"BULK_DETACH_COMPLETE":d(!1),u.failed>0&&(console.error("Bulk detach errors:",u.errors),alert("Detached "+u.successful+" styles. "+u.failed+` failed.

`+u.errors.slice(0,3).join(`
`))),u.successful>0&&G();break;case"IGNORED_VIOLATIONS_LOADED":k(new Set(u.ignoredKeys)),T(!0),console.log("[UI] Loaded",u.ignoredKeys.length,"ignored violations from storage");break;case"ERROR":console.error("Plugin error:",u.message),s(!1),d(!1);break}};return window.addEventListener("message",m),()=>window.removeEventListener("message",m)},[G]),ne(()=>{async function m(){try{console.log("[UI] Starting token load...");let w=await lt();console.log("[UI] Token files loaded, sending to plugin..."),x({type:"TOKEN_FILES_LOADED",files:w.map(u=>({path:u.path,content:u.content}))})}catch(w){console.error("[UI] Failed to load tokens:",w)}}m()},[x]),ne(()=>{x({type:"LOAD_IGNORED_VIOLATIONS"})},[x]),ne(()=>{h&&x({type:"SAVE_IGNORED_VIOLATIONS",ignoredKeys:Array.from(E)})},[E,h,x]);let ue=V(m=>{x({type:"SELECT_NODE",nodeId:m})},[x]),Y=V(m=>{m.suggestedToken&&(d(!0),x({type:"APPLY_FIX",nodeId:m.nodeId,property:m.property,tokenPath:m.suggestedToken,ruleId:m.ruleId}))},[x]),K=V(m=>{let w=m.filter(u=>u.suggestedToken);w.length!==0&&(d(!0),x({type:"APPLY_BULK_FIX",fixes:w.map(u=>({nodeId:u.nodeId,property:u.property,tokenPath:u.suggestedToken,ruleId:u.ruleId}))}))},[x]),pe=V(m=>{d(!0),x({type:"UNBIND_VARIABLE",nodeId:m.nodeId,property:m.property})},[x]),F=V(m=>{d(!0),x({type:"DETACH_STYLE",nodeId:m.nodeId,property:m.property})},[x]),dt=V(m=>{let w=m.filter(u=>u.canDetach);w.length!==0&&(d(!0),x({type:"BULK_DETACH_STYLES",detaches:w.map(u=>({nodeId:u.nodeId,property:u.property}))}))},[x]),ut=V(m=>{m.suggestedTextStyle&&(d(!0),x({type:"APPLY_TEXT_STYLE",nodeId:m.nodeId,textStyleId:m.suggestedTextStyle.id,property:m.property}))},[x]),pt=V(m=>{let w=m.nodeId+":"+m.property;k($=>{let D=new Set($);return D.add(w),D});let u={nodeId:m.nodeId,nodeName:m.nodeName,property:m.property,actionType:"ignore",beforeValue:String(m.currentValue),afterValue:"ignored",status:"success",timestamp:Date.now()};B($=>[...$,u])},[]),_t=V(()=>{if(!o)return;let m=o.violations.filter(w=>w.isPathMismatch&&w.normalizedMatchPath&&!v.has(w.nodeId+":"+w.property));m.length!==0&&(d(!0),x({type:"AUTO_FIX_PATH_MISMATCHES",fixes:m.map(w=>({nodeId:w.nodeId,property:w.property,tokenPath:w.normalizedMatchPath}))}))},[o,v,x]),ft=V(()=>{B([])},[]),gt=V(m=>{if(!o)return;let w,u,$;if(m==="json")w=JSON.stringify(o,null,2),u="lint-results.json",$="application/json";else{let _e=["Rule","Severity","Node Name","Node Type","Layer Path","Property","Current Value","Message","Suggested Token"],fe=o.violations.map(O=>[O.ruleId,O.severity,O.nodeName,O.nodeType,O.layerPath,O.property,String(O.currentValue),O.message,O.suggestedToken||""]);w=[_e,...fe].map(O=>O.map(vt=>'"'+vt.replace(/"/g,'""')+'"').join(",")).join(`
`),u="lint-results.csv",$="text/csv"}let D=new Blob([w],{type:$}),Q=URL.createObjectURL(D),X=document.createElement("a");X.href=Q,X.download=u,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(Q)},[o]),mt=V(m=>{t(m),x({type:"UPDATE_CONFIG",config:m})},[x]),ht=o?.violations.filter(m=>m.suggestedToken&&!v.has(m.nodeId+":"+m.property)).length||0;return n("div",{className:"app",children:[n(Ze,{onScan:G,isScanning:l,scope:f,onScopeChange:a,onExport:gt,hasResults:o!==null,view:g,onViewChange:_}),l&&n(tt,{processed:p.processed,total:p.total}),g==="results"&&n(W,{children:[o&&n(et,{results:o,fixedViolations:v,ignoredViolations:E}),o&&o.violations.length>0&&n(W,{children:[n(nt,{violations:o.violations,fixedViolations:v,isFixing:r,onFixAll:()=>K(o.violations),onAutoFixPathMismatches:_t,fixProgress:z,showActivityLog:H,onToggleActivityLog:()=>R(!H),activityCount:M.length}),n(ot,{actions:M,isVisible:H,onClose:()=>R(!1),onClear:ft})]}),n(at,{results:o,groupBy:b,onGroupByChange:L,onSelectNode:ue,onFix:Y,onBulkFix:K,onUnbind:pe,onDetach:F,onBulkDetach:dt,onApplyStyle:ut,onIgnore:pt,fixedViolations:v,ignoredViolations:E,isFixing:r,fixableCount:ht})]}),g==="config"&&n(rt,{config:e,onChange:mt})]})}Oe(n(ct,{}),document.getElementById("app"));})();
</script>
  </body>
</html>
